<article class="post">
  {{#if (GetNotTopLevel post)}}
    <a href="{{lookup (GetPostById parent_id ../user) "human_readable_url"}}">â†‘ parent</a>
  {{/if}}
  <details open class="post">
    <summary>
      {{> post_header}}
    </summary>
    <!-- TODO: The collapsed prompt to edit if (GetEditable post ../user), given post_id,content,rights. -->
    {{#if (Less depth 1)}}
      <div class="content">{{{(GetContent post)}}}</div>
      <!-- TODO: The collapsed prompt to add a new child, if (GetPostable post ../user), given parent_id,content,rights,user. -->
      <!--   TODO: Have `user_form_elem.html`: if logged in, be nothing (a hidden input `name="user"`, rather), else a checkbox: if not checked, username+password, else username+file. MUST have JS to set the hidden input's value to the hash of the entered info. -->
      <!--   TODO: Have `edit_post.html`, to extract functionality. -->
      <div class="children-pagination">
        <!-- TODO: How to do pagination? For each page, display a link to it unless it's the current page? But we'd like to only display the neighborhood and start/end... Should really have a helper, returning an array of page-indices... -->
        {{GetPostChildrenLength post}} pages
      </div>
      {{#each (GetPostChildren post ../user ../page)}}
        {{> one_post depth=(Plus1 depth) post=(GetPostById post user) user=user page=0}}
      {{/each}}
    {{/if}}
  </details>
</article>
<!-- TODO: Write down all other visual components that we want. -->
<!--   ...Is that basically all we want, apart from user-specific stuff? ...Maybe said user-specific stuff should be in the post-viewer, detected when viewing the user's first post... -->
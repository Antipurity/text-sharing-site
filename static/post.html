<!DOCTYPE html>
{{#with (GetPostById post user)}}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{GetSummary this}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="/post.css" rel="stylesheet">
  </head>
  <body>
    <main>
      <!-- TODO: ...What about login?... How to login, show that we're logged in (via a link to our first post, and possibly its summary), and logout, all in the corner of every page?... -->
      <article class="post top-level">
        <!-- TODO: Zeroth, if not top-level, include a link to the parent. (Or maybe always.) (Do we want it to be human-readable? We'd need to read the parent post, right?) -->
        <div class="summary">
          <div class="reward">
            <!-- TODO: If logged in, the "- reward" button, highlighted if the user gave it -1 reward. -->
            <!--   ...How would we wire it up... JS, and data in attributes? -->
            <!--   ...How would we even check whether we're logged in... -->
            {{GetPostReward this}}
            <!-- TODO: If logged in, the "+ reward" button, highlighted if the user gave it +1 reward. -->
            <!--   ...How would we wire it up... JS, and data in attributes? -->
            <!--   ...How would we even check whether we're logged in... -->
          </div>
          <strong>{{GetSummary this}}</strong>
        </div>
        <p>{{{(GetContent this)}}}</p>
        <!-- TODO: Third, the prompt to edit if (GetEditable this ../user), perhaps collapsed. -->
        <!--   ...What do we include there... -->
        <!-- TODO: Fourth, the container of children. -->
        <!--   TODO: Fifth, the prompt to add a new child, if (GetPostable this ../user). -->
        <!--   TODO: Sixth, the list of pages unless there's only one, each except the current one a link to a page. -->
        <!--   TODO: Seventh, the list of children. -->
        <div class="children">
          <div class="children-pagination">
            <!-- TODO: Also, maybe, display the raw child count? -->
            <!-- TODO: How to do pagination? -->
            {{GetPostChildrenLength this}} pages
          </div>
          <!-- TODO: Display all the children here, as summaries. -->
          <p>Children, page 0: {{GetPostChildren this ../user 0}}</p>
          <!--   TODO: Uh, are these posts? Yeah. How to iterate over them? -->
          <!--     (Would like to wrap their contents in <details>. And summaries should be human-readable URLs to them.) -->
        </div>
      </article>
      <!-- TODO: Write down all other visual components that we want. -->
    </main>
  </body>
</html>
{{/with}}
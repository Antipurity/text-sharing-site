<div class="login-header smaller-font">
  {{#if (IsLoggedIn user)}}
    <!-- Theoretically, the first post's summary is a good source of the username to display here. -->
    <!--   Practically, Handlebars templates aren't async, so an extra roundtrip to Firebase is no good for speed. And storing it with access_hash is too fiddly. -->
    <a href="/user/{{Hash user}}">Logged in</a>
    |
    <form action="/login" method="post">
      <input type="hidden" name="user" value="">
      <button class="btn btn-outline-secondary" name="url" value="{{url}}">Logout</button>
    </form>
  {{else}}
    To sign up, post your username somewhere.
    <details>
      <summary>Log in</summary>
      <form action="/login" method="post">
        {{> post_user_form_elem user=user}}
        <button class="btn btn-primary full-width" name="url" value="{{url}}">Login</button>
      </form>
    </details>
  {{/if}}
</div>